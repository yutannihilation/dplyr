<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create, modify, and delete columns — mutate • dplyr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<meta property="og:title" content="Create, modify, and delete columns — mutate" />
<meta property="og:description" content="mutate() adds new variables and preserves existing ones;
transmute() adds new variables and drops existing ones.
New variables overwrite existing variables of the same name.
Variables can be removed by setting their value to NULL." />
<meta property="og:image" content="https://dplyr.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">dplyr</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.8.99.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/dplyr.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/two-table.html">Two-table verbs</a>
    </li>
    <li>
      <a href="../articles/window-functions.html">Window functions</a>
    </li>
    <li>
      <a href="http://dbplyr.tidyverse.org/articles/dbplyr.html">Databases with dbplyr</a>
    </li>
    <li>
      <a href="../articles/programming.html">Programming with dplyr</a>
    </li>
    <li>
      <a href="../articles/compatibility.html">Compatibility</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/10/dplyr-0-8-4/">Version 0.8.4</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/07/dplyr-0-8-3/">Version 0.8.3</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/06/dplyr-0-8-2/">Version 0.8.2</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/05/dplyr-0-8-1/">Version 0.8.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/02/dplyr-0-8-0/">Version 0.8.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/06/dplyr-0.7.5/">Version 0.7.5</a>
    </li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/dplyr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create, modify, and delete columns</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/dplyr/blob/master/R/mutate.R'><code>R/mutate.R</code></a></small>
    <div class="hidden name"><code>mutate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>mutate()</code> adds new variables and preserves existing ones;
<code>transmute()</code> adds new variables and drops existing ones.
New variables overwrite existing variables of the same name.
Variables can be removed by setting their value to <code>NULL</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>mutate</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>mutate</span>(
  <span class='no'>.data</span>,
  <span class='no'>...</span>,
  <span class='kw'>.keep</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"all"</span>, <span class='st'>"used"</span>, <span class='st'>"unused"</span>, <span class='st'>"none"</span>),
  <span class='kw'>.before</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.after</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)

<span class='fu'>transmute</span>(<span class='no'>.data</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.data</th>
      <td><p>A data frame, data frame extension (e.g. a tibble), or a
lazy data frame (e.g. from dbplyr or dtplyr). See <em>Methods</em>, below, for
more details.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>&lt;<code><a href='dplyr_data_masking.html'>data-masking</a></code>&gt; Name-value pairs.
The name gives the name of the column in the output.</p>
<p>The value can be:</p><ul>
<li><p>A vector of length 1, which will be recycled to the correct length.</p></li>
<li><p>A vector the same length as the current group (or the whole data frame
if ungrouped).</p></li>
<li><p><code>NULL</code>, to remove the column.</p></li>
<li><p>A data frame or tibble, to create multiple columns in the output.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>.keep</th>
      <td><p><a href='https://www.tidyverse.org/lifecycle/#experimental'><img src='figures/lifecycle-experimental.svg' alt='Experimental lifecycle'></a>

This is an experimental argument that allows you to control which columns
from <code>.data</code> are retained in the output:</p><ul>
<li><p><code>"all"</code>, the default, retains all variables.</p></li>
<li><p><code>"used"</code> keeps any variables used to make new variables; it's useful
for checking your work as it displays inputs and outputs side-by-side.</p></li>
<li><p><code>"unused"</code> keeps only existing variables <strong>not</strong> used to make new
variables.</p></li>
<li><p><code>"none"</code>, only keeps grouping keys (like <code>transmute()</code>).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>.before, .after</th>
      <td><p><a href='https://www.tidyverse.org/lifecycle/#experimental'><img src='figures/lifecycle-experimental.svg' alt='Experimental lifecycle'></a>

&lt;<code><a href='dplyr_tidy_select.html'>tidy-select</a></code>&gt; Optionally, control where new columns
should appear (the default is to add to the right hand side). See
<code><a href='relocate.html'>relocate()</a></code> for more details.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the same type as <code>.data</code>. The output has the following
properties:</p><ul>
<li><p>Rows are not affected.</p></li>
<li><p>Existing columns will be preserved according to the <code>.keep</code> argument.
New columns will be placed according to the <code>.before</code> and <code>.after</code>
arguments. If <code>.keep = "none"</code> (as in <code>transmute()</code>), the output order
is determined only by <code>...</code>, not the order of existing columns.</p></li>
<li><p>Columns given value <code>NULL</code> will be removed</p></li>
<li><p>Groups will be recomputed if a grouping variable is mutated.</p></li>
<li><p>Data frame attributes are preserved.</p></li>
</ul>

    <h2 class="hasAnchor" id="useful-mutate-functions"><a class="anchor" href="#useful-mutate-functions"></a>Useful mutate functions</h2>

    

<ul>
<li><p><code><a href='https://rdrr.io/r/base/Arithmetic.html'>+</a></code>, <code><a href='https://rdrr.io/r/base/Arithmetic.html'>-</a></code>, <code><a href='https://rdrr.io/r/base/Log.html'>log()</a></code>, etc., for their usual mathematical meanings</p></li>
<li><p><code><a href='lead-lag.html'>lead()</a></code>, <code><a href='lead-lag.html'>lag()</a></code></p></li>
<li><p><code><a href='ranking.html'>dense_rank()</a></code>, <code><a href='ranking.html'>min_rank()</a></code>, <code><a href='ranking.html'>percent_rank()</a></code>, <code><a href='ranking.html'>row_number()</a></code>,
<code><a href='ranking.html'>cume_dist()</a></code>, <code><a href='ranking.html'>ntile()</a></code></p></li>
<li><p><code><a href='https://rdrr.io/r/base/cumsum.html'>cumsum()</a></code>, <code><a href='cumall.html'>cummean()</a></code>, <code><a href='https://rdrr.io/r/base/cumsum.html'>cummin()</a></code>, <code><a href='https://rdrr.io/r/base/cumsum.html'>cummax()</a></code>, <code><a href='cumall.html'>cumany()</a></code>, <code><a href='cumall.html'>cumall()</a></code></p></li>
<li><p><code><a href='na_if.html'>na_if()</a></code>, <code><a href='coalesce.html'>coalesce()</a></code></p></li>
<li><p><code><a href='if_else.html'>if_else()</a></code>, <code><a href='recode.html'>recode()</a></code>, <code><a href='case_when.html'>case_when()</a></code></p></li>
</ul>

    <h2 class="hasAnchor" id="grouped-tibbles"><a class="anchor" href="#grouped-tibbles"></a>Grouped tibbles</h2>

    


<p>Because mutating expressions are computed within groups, they may
yield different results on grouped tibbles. This will be the case
as soon as an aggregating, lagging, or ranking function is
involved. Compare this ungrouped mutate:</p><pre>starwars %&gt;%
  select(name, mass, species) %&gt;%
  mutate(mass_norm = mass / mean(mass, na.rm = TRUE))
</pre>

<p>With the grouped equivalent:</p><pre>starwars %&gt;%
  select(name, mass, species) %&gt;%
  group_by(species) %&gt;%
  mutate(mass_norm = mass / mean(mass, na.rm = TRUE))
</pre>

<p>The former normalises <code>mass</code> by the global average whereas the
latter normalises by the averages within species levels.</p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<p>These function are <strong>generic</strong>s, which means that packages can provide
implementations (methods) for other classes. See the documentation of
individual methods for extra arguments and differences in behaviour.</p>
<p>Methods available in currently loaded packages:</p><ul>
<li><p><code>mutate()</code>: dbplyr (<code>tbl_lazy</code>), dplyr (<code>data.frame</code>, <code>default</code>)
.</p></li>
<li><p><code>transmute()</code>: dbplyr (<code>tbl_lazy</code>), dplyr (<code>data.frame</code>)
.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other single table verbs: 
<code><a href='arrange.html'>arrange</a>()</code>,
<code><a href='filter.html'>filter</a>()</code>,
<code><a href='rename.html'>rename</a>()</code>,
<code><a href='select.html'>select</a>()</code>,
<code><a href='slice.html'>slice</a>()</code>,
<code><a href='summarise.html'>summarise</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Newly created variables are available immediately</span>
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='select.html'>select</a></span>(<span class='no'>name</span>, <span class='no'>mass</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'>mutate</span>(
  <span class='kw'>mass2</span> <span class='kw'>=</span> <span class='no'>mass</span> * <span class='fl'>2</span>,
  <span class='kw'>mass2_squared</span> <span class='kw'>=</span> <span class='no'>mass2</span> * <span class='no'>mass2</span>
)</div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 87 x 4</span><span>
#&gt;    name                mass mass2 mass2_squared
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>         </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> Luke Skywalker        77   154         </span><span style='text-decoration: underline;'>23</span><span>716
#&gt; </span><span style='color: #555555;'> 2</span><span> C-3PO                 75   150         </span><span style='text-decoration: underline;'>22</span><span>500
#&gt; </span><span style='color: #555555;'> 3</span><span> R2-D2                 32    64          </span><span style='text-decoration: underline;'>4</span><span>096
#&gt; </span><span style='color: #555555;'> 4</span><span> Darth Vader          136   272         </span><span style='text-decoration: underline;'>73</span><span>984
#&gt; </span><span style='color: #555555;'> 5</span><span> Leia Organa           49    98          </span><span style='text-decoration: underline;'>9</span><span>604
#&gt; </span><span style='color: #555555;'> 6</span><span> Owen Lars            120   240         </span><span style='text-decoration: underline;'>57</span><span>600
#&gt; </span><span style='color: #555555;'> 7</span><span> Beru Whitesun lars    75   150         </span><span style='text-decoration: underline;'>22</span><span>500
#&gt; </span><span style='color: #555555;'> 8</span><span> R5-D4                 32    64          </span><span style='text-decoration: underline;'>4</span><span>096
#&gt; </span><span style='color: #555555;'> 9</span><span> Biggs Darklighter     84   168         </span><span style='text-decoration: underline;'>28</span><span>224
#&gt; </span><span style='color: #555555;'>10</span><span> Obi-Wan Kenobi        77   154         </span><span style='text-decoration: underline;'>23</span><span>716
#&gt; </span><span style='color: #555555;'># … with 77 more rows</span><span></div><div class='input'>
<span class='co'># As well as adding new variables, you can use mutate() to</span>
<span class='co'># remove variables and modify existing variables.</span>
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='select.html'>select</a></span>(<span class='no'>name</span>, <span class='no'>height</span>, <span class='no'>mass</span>, <span class='no'>homeworld</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'>mutate</span>(
  <span class='kw'>mass</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>height</span> <span class='kw'>=</span> <span class='no'>height</span> * <span class='fl'>0.0328084</span> <span class='co'># convert to feet</span>
)</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 87 x 3</span><span>
#&gt;    name               height homeworld
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>               </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    
#&gt; </span><span style='color: #555555;'> 1</span><span> Luke Skywalker       5.64 Tatooine 
#&gt; </span><span style='color: #555555;'> 2</span><span> C-3PO                5.48 Tatooine 
#&gt; </span><span style='color: #555555;'> 3</span><span> R2-D2                3.15 Naboo    
#&gt; </span><span style='color: #555555;'> 4</span><span> Darth Vader          6.63 Tatooine 
#&gt; </span><span style='color: #555555;'> 5</span><span> Leia Organa          4.92 Alderaan 
#&gt; </span><span style='color: #555555;'> 6</span><span> Owen Lars            5.84 Tatooine 
#&gt; </span><span style='color: #555555;'> 7</span><span> Beru Whitesun lars   5.41 Tatooine 
#&gt; </span><span style='color: #555555;'> 8</span><span> R5-D4                3.18 Tatooine 
#&gt; </span><span style='color: #555555;'> 9</span><span> Biggs Darklighter    6.00 Tatooine 
#&gt; </span><span style='color: #555555;'>10</span><span> Obi-Wan Kenobi       5.97 Stewjon  
#&gt; </span><span style='color: #555555;'># … with 77 more rows</span><span></div><div class='input'>
<span class='co'># Use across() with mutate() to apply a transformation</span>
<span class='co'># to multiple columns in a tibble.</span>
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='select.html'>select</a></span>(<span class='no'>name</span>, <span class='no'>homeworld</span>, <span class='no'>species</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'>mutate</span>(<span class='fu'><a href='across.html'>across</a></span>(-<span class='no'>name</span>, <span class='no'>as.factor</span>))</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 87 x 3</span><span>
#&gt;    name               homeworld species
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span>     </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span>  
#&gt; </span><span style='color: #555555;'> 1</span><span> Luke Skywalker     Tatooine  Human  
#&gt; </span><span style='color: #555555;'> 2</span><span> C-3PO              Tatooine  Droid  
#&gt; </span><span style='color: #555555;'> 3</span><span> R2-D2              Naboo     Droid  
#&gt; </span><span style='color: #555555;'> 4</span><span> Darth Vader        Tatooine  Human  
#&gt; </span><span style='color: #555555;'> 5</span><span> Leia Organa        Alderaan  Human  
#&gt; </span><span style='color: #555555;'> 6</span><span> Owen Lars          Tatooine  Human  
#&gt; </span><span style='color: #555555;'> 7</span><span> Beru Whitesun lars Tatooine  Human  
#&gt; </span><span style='color: #555555;'> 8</span><span> R5-D4              Tatooine  Droid  
#&gt; </span><span style='color: #555555;'> 9</span><span> Biggs Darklighter  Tatooine  Human  
#&gt; </span><span style='color: #555555;'>10</span><span> Obi-Wan Kenobi     Stewjon   Human  
#&gt; </span><span style='color: #555555;'># … with 77 more rows</span><span></div><div class='input'><span class='co'># see more in ?across</span>

<span class='co'># Window functions are useful for grouped mutates:</span>
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='select.html'>select</a></span>(<span class='no'>name</span>, <span class='no'>mass</span>, <span class='no'>homeworld</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='group_by.html'>group_by</a></span>(<span class='no'>homeworld</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'>mutate</span>(<span class='kw'>rank</span> <span class='kw'>=</span> <span class='fu'><a href='ranking.html'>min_rank</a></span>(<span class='fu'><a href='desc.html'>desc</a></span>(<span class='no'>mass</span>)))</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 87 x 4</span><span>
#&gt; </span><span style='color: #555555;'># Groups:   homeworld [49]</span><span>
#&gt;    name                mass homeworld  rank
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>     </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> Luke Skywalker        77 Tatooine      5
#&gt; </span><span style='color: #555555;'> 2</span><span> C-3PO                 75 Tatooine      6
#&gt; </span><span style='color: #555555;'> 3</span><span> R2-D2                 32 Naboo         6
#&gt; </span><span style='color: #555555;'> 4</span><span> Darth Vader          136 Tatooine      1
#&gt; </span><span style='color: #555555;'> 5</span><span> Leia Organa           49 Alderaan      2
#&gt; </span><span style='color: #555555;'> 6</span><span> Owen Lars            120 Tatooine      2
#&gt; </span><span style='color: #555555;'> 7</span><span> Beru Whitesun lars    75 Tatooine      6
#&gt; </span><span style='color: #555555;'> 8</span><span> R5-D4                 32 Tatooine      8
#&gt; </span><span style='color: #555555;'> 9</span><span> Biggs Darklighter     84 Tatooine      3
#&gt; </span><span style='color: #555555;'>10</span><span> Obi-Wan Kenobi        77 Stewjon       1
#&gt; </span><span style='color: #555555;'># … with 77 more rows</span><span></div><div class='input'><span class='co'># see `vignette("window-functions")` for more details</span>

<span class='co'># By default, new columns are placed on the far right.</span>
<span class='co'># Experimental: you can override with `.before` or `.after`</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='no'>y</span>)</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1 x 3</span><span>
#&gt;       x     y     z
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span>     1     2     3</div><div class='input'><span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='no'>y</span>, <span class='kw'>.before</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1 x 3</span><span>
#&gt;       z     x     y
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span>     3     1     2</div><div class='input'><span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='no'>y</span>, <span class='kw'>.after</span> <span class='kw'>=</span> <span class='no'>x</span>)</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1 x 3</span><span>
#&gt;       x     z     y
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span>     1     3     2</div><div class='input'>
<span class='co'># By default, mutate() keeps all columns from the input data.</span>
<span class='co'># Experimental: You can override with `.keep`</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>a</span> <span class='kw'>=</span> <span class='st'>"a"</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='st'>"b"</span>)
<span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='no'>y</span>, <span class='kw'>.keep</span> <span class='kw'>=</span> <span class='st'>"all"</span>) <span class='co'># the default</span></div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1 x 5</span><span>
#&gt;       x     y a     b         z
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span>     1     2 a     b         3</div><div class='input'><span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='no'>y</span>, <span class='kw'>.keep</span> <span class='kw'>=</span> <span class='st'>"used"</span>)</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1 x 3</span><span>
#&gt;       x     y     z
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span>     1     2     3</div><div class='input'><span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='no'>y</span>, <span class='kw'>.keep</span> <span class='kw'>=</span> <span class='st'>"unused"</span>)</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1 x 3</span><span>
#&gt;   a     b         z
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span> a     b         3</div><div class='input'><span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='no'>y</span>, <span class='kw'>.keep</span> <span class='kw'>=</span> <span class='st'>"none"</span>) <span class='co'># same as transmute()</span></div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1 x 1</span><span>
#&gt;       z
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span>     3</div><div class='input'>
<span class='co'># Grouping ----------------------------------------</span>
<span class='co'># The mutate operation may yield different results on grouped</span>
<span class='co'># tibbles because the expressions are computed within groups.</span>
<span class='co'># The following normalises `mass` by the global average:</span>
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select.html'>select</a></span>(<span class='no'>name</span>, <span class='no'>mass</span>, <span class='no'>species</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>mutate</span>(<span class='kw'>mass_norm</span> <span class='kw'>=</span> <span class='no'>mass</span> / <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>mass</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 87 x 4</span><span>
#&gt;    name                mass species mass_norm
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> Luke Skywalker        77 Human       0.791
#&gt; </span><span style='color: #555555;'> 2</span><span> C-3PO                 75 Droid       0.771
#&gt; </span><span style='color: #555555;'> 3</span><span> R2-D2                 32 Droid       0.329
#&gt; </span><span style='color: #555555;'> 4</span><span> Darth Vader          136 Human       1.40 
#&gt; </span><span style='color: #555555;'> 5</span><span> Leia Organa           49 Human       0.504
#&gt; </span><span style='color: #555555;'> 6</span><span> Owen Lars            120 Human       1.23 
#&gt; </span><span style='color: #555555;'> 7</span><span> Beru Whitesun lars    75 Human       0.771
#&gt; </span><span style='color: #555555;'> 8</span><span> R5-D4                 32 Droid       0.329
#&gt; </span><span style='color: #555555;'> 9</span><span> Biggs Darklighter     84 Human       0.863
#&gt; </span><span style='color: #555555;'>10</span><span> Obi-Wan Kenobi        77 Human       0.791
#&gt; </span><span style='color: #555555;'># … with 77 more rows</span><span></div><div class='input'>
<span class='co'># Whereas this normalises `mass` by the averages within species</span>
<span class='co'># levels:</span>
<span class='no'>starwars</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='select.html'>select</a></span>(<span class='no'>name</span>, <span class='no'>mass</span>, <span class='no'>species</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='group_by.html'>group_by</a></span>(<span class='no'>species</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>mutate</span>(<span class='kw'>mass_norm</span> <span class='kw'>=</span> <span class='no'>mass</span> / <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>mass</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 87 x 4</span><span>
#&gt; </span><span style='color: #555555;'># Groups:   species [38]</span><span>
#&gt;    name                mass species mass_norm
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> Luke Skywalker        77 Human       0.930
#&gt; </span><span style='color: #555555;'> 2</span><span> C-3PO                 75 Droid       1.08 
#&gt; </span><span style='color: #555555;'> 3</span><span> R2-D2                 32 Droid       0.459
#&gt; </span><span style='color: #555555;'> 4</span><span> Darth Vader          136 Human       1.64 
#&gt; </span><span style='color: #555555;'> 5</span><span> Leia Organa           49 Human       0.592
#&gt; </span><span style='color: #555555;'> 6</span><span> Owen Lars            120 Human       1.45 
#&gt; </span><span style='color: #555555;'> 7</span><span> Beru Whitesun lars    75 Human       0.906
#&gt; </span><span style='color: #555555;'> 8</span><span> R5-D4                 32 Droid       0.459
#&gt; </span><span style='color: #555555;'> 9</span><span> Biggs Darklighter     84 Human       1.01 
#&gt; </span><span style='color: #555555;'>10</span><span> Obi-Wan Kenobi        77 Human       0.930
#&gt; </span><span style='color: #555555;'># … with 77 more rows</span><span></div><div class='input'>
<span class='co'># Indirection ----------------------------------------</span>
<span class='co'># Refer to column names stored as strings with the `.data` pronoun:</span>
<span class='no'>vars</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"mass"</span>, <span class='st'>"height"</span>)
<span class='fu'>mutate</span>(<span class='no'>starwars</span>, <span class='kw'>prod</span> <span class='kw'>=</span> <span class='no'>.data</span><span class='kw'>[[</span><span class='no'>vars</span><span class='kw'>[[</span><span class='fl'>1</span>]]]] * <span class='no'>.data</span><span class='kw'>[[</span><span class='no'>vars</span><span class='kw'>[[</span><span class='fl'>2</span>]]]])</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 87 x 15</span><span>
#&gt;    name  height  mass hair_color skin_color eye_color birth_year sex   gender
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>      </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>      </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> 
#&gt; </span><span style='color: #555555;'> 1</span><span> Luke…    172    77 blond      fair       blue            19   male  mascu…
#&gt; </span><span style='color: #555555;'> 2</span><span> C-3PO    167    75 </span><span style='color: #BB0000;'>NA</span><span>         gold       yellow         112   none  mascu…
#&gt; </span><span style='color: #555555;'> 3</span><span> R2-D2     96    32 </span><span style='color: #BB0000;'>NA</span><span>         white, bl… red             33   none  mascu…
#&gt; </span><span style='color: #555555;'> 4</span><span> Dart…    202   136 none       white      yellow          41.9 male  mascu…
#&gt; </span><span style='color: #555555;'> 5</span><span> Leia…    150    49 brown      light      brown           19   fema… femin…
#&gt; </span><span style='color: #555555;'> 6</span><span> Owen…    178   120 brown, gr… light      blue            52   male  mascu…
#&gt; </span><span style='color: #555555;'> 7</span><span> Beru…    165    75 brown      light      blue            47   fema… femin…
#&gt; </span><span style='color: #555555;'> 8</span><span> R5-D4     97    32 </span><span style='color: #BB0000;'>NA</span><span>         white, red red             </span><span style='color: #BB0000;'>NA</span><span>   none  mascu…
#&gt; </span><span style='color: #555555;'> 9</span><span> Bigg…    183    84 black      light      brown           24   male  mascu…
#&gt; </span><span style='color: #555555;'>10</span><span> Obi-…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
#&gt; </span><span style='color: #555555;'># … with 77 more rows, and 6 more variables: homeworld </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, species </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>,
#&gt; #   films </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span style='color: #555555;'>, vehicles </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span style='color: #555555;'>, starships </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span style='color: #555555;'>, prod </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span></div><div class='input'># Learn more in ?dplyr_data_masking
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#useful-mutate-functions">Useful mutate functions</a></li>
      <li><a href="#grouped-tibbles">Grouped tibbles</a></li>
      <li><a href="#methods">Methods</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>dplyr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Romain François, Lionel Henry, <a href='http://krlmlr.info'>Kirill Müller</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '1270c4079b26a138795263974bbf302d',
    indexName: 'tidyverse',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


